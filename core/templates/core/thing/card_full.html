{% load static %}
{% load my_filters %}
{% load my_tags %}

<div class="col-lg-6 col-12 pb-2">
    <div class="card bg-dark text-white">
        {% if thing.get_picture.image.url %}
            <img src="{{thing.get_picture.image.url}}" class="card-img img-fluid height-25%">
        {% else %}
            <img src="{% static 'thing_default.jpg' %}">
        {% endif %}
        
        <div class="card-img-overlay">
            <h5 class="card-title">{{thing.name}}</h5>
            <p class="card-text">{{thing.short_description}}</p>
            <a href="{% url "core:thing_detail" pk=thing.pk%}" class='btn btn-outline-light'>Visit</a>
        </div>

        <ul class="list-group">
        {% for field, value in thing.get_fields.items %}
            {% if value != 'None' %}
            <a class="list-group-item text-dark" aria-current="true">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="mb-1">{{field|add_spaces}}</h5>
                    {% if field == 'stars' %}
                    <small>{{value}} â€¢ {{thing.comments.count}}</small>
                    {% endif %}
                </div>
                
                {% if field == 'address' %}
                <small>{{value}}</small>
                
                {% elif field == 'stars' %}
                <p class="starability-result mb-1" data-rating="{{value|to_int}}">
                    Rated: {{value|to_int}} stars
                </p>
                
                {% elif field == 'price' %}
                <p>${{value}}</p>
                
                {% elif field == 'covid_safe' %}
                    {% if value == 'True' %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="rgb(15,81,50)" class="bi bi-exclamation-triangle-fill flex-shrink-0 me-2" viewBox="0 0 16 16" role="img" aria-label="Warning:">
                        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                    </svg>
                    {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="rgb(132,32,41)" class="bi bi-exclamation-triangle-fill flex-shrink-0 me-2" viewBox="0 0 16 16" role="img" aria-label="Warning:">
                        <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    {% endif %}
                
                {% else %}
                <p class="mb-1">{% get_field_value field thing %}</p>
                {% endif %}
            {% endif %}
            </a>
        {% endfor %}
        </ul>
    </div>
</div>

{% block card %}
{% endblock card %}